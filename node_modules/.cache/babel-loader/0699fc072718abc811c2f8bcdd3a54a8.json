{"ast":null,"code":"import _slicedToArray from \"/Users/jayc/Desktop/stanger/stanger/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jayc/Desktop/stanger/stanger/src/login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"./header\";\nimport { useNavigate } from \"react-router-dom\";\nfunction Login(props) {\n  var _this = this;\n  var navigate = useNavigate();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    pwd = _useState2[0],\n    setPWD = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    success = _useState6[0],\n    setSuccess = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    message = _useState8[0],\n    setMessage = _useState8[1];\n  useEffect(function () {\n    if (success) {\n      setTimeout(function () {\n        navigate('/profile');\n        //console.log(\"1\");\n      }, 1000);\n    }\n  });\n  var errorMessage = function errorMessage() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      style: {\n        display: error ? 'block' : 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        color: error ? 'red' : ''\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }\n    }, message));\n  };\n  var successMessage = function successMessage() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error\",\n      style: {\n        display: success ? 'block' : 'none'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        color: success ? 'green' : ''\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }\n    }, message));\n  };\n  var submitHandler = function submitHandler(event) {\n    event.preventDefault();\n    if (props.username === '' || pwd === '') {\n      setError(true);\n      setSuccess(false);\n      setMessage(\"Email and Password can not be blank.\");\n    } else {\n      fetch('https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT/users/login', {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            username: props.username,\n            password: pwd\n          }\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (result) {\n        if (result.success) {\n          props.setToken(result.data.token);\n          setSuccess(true);\n          window.localStorage.setItem('Token', result.data.token);\n          window.localStorage.setItem('User', props.username);\n          setMessage(\"Success~ Redirecting to your profile page now...\");\n        } else {\n          setError(true);\n          setMessage(\"No User found.\");\n        }\n      }).catch(console.error);\n    }\n  };\n  var handleEmail = function handleEmail(event) {\n    props.setUsername(event.target.value);\n  };\n  var handlePassword = function handlePassword(event) {\n    setPWD(event.target.value);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    token: props.token,\n    setToken: props.setToken,\n    setUsername: props.setUsername,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form text-center loginpage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"loginTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Log in\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, errorMessage(), successMessage()), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label loginInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleEmail,\n    className: \"input\",\n    value: props.username === null ? \"\" : props.username,\n    type: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label loginInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handlePassword,\n    className: \"input\",\n    value: pwd,\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"loginSubBtn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, \"Not a member? \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/account/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 38\n    }\n  }, \"Register Here\")))));\n}\nexport default Login;","map":{"version":3,"names":["React","useState","useEffect","Header","useNavigate","Login","props","navigate","pwd","setPWD","error","setError","success","setSuccess","message","setMessage","setTimeout","errorMessage","display","color","successMessage","submitHandler","event","preventDefault","username","fetch","method","headers","body","JSON","stringify","user","password","then","response","json","result","setToken","data","token","window","localStorage","setItem","catch","console","handleEmail","setUsername","target","value","handlePassword"],"sources":["/Users/jayc/Desktop/stanger/stanger/src/login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Header from \"./header\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\n\r\nfunction Login(props) {\r\n    const navigate = useNavigate();\r\n    const [pwd, setPWD] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(()=>{\r\n        if(success){\r\n            setTimeout(()=>{\r\n                navigate('/profile');\r\n                //console.log(\"1\");\r\n            }, 1000);\r\n        }\r\n    });\r\n\r\n    const errorMessage = () => {\r\n        return (\r\n            <div className=\"error\" style={{display: error ? 'block' : 'none'}}>\r\n                <h4 style={{color: error? 'red': ''}}>{message}</h4>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const successMessage = () => {\r\n        return (\r\n            <div className=\"error\" style={{display: success ? 'block' : 'none'}}>\r\n                <h4 style={{color: success? 'green': ''}}>{message}</h4>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const submitHandler = (event) => {\r\n        event.preventDefault();\r\n        if(props.username === '' || pwd === ''){\r\n            setError(true);\r\n            setSuccess(false);\r\n            \r\n            setMessage(\"Email and Password can not be blank.\")\r\n        }\r\n        else{\r\n            fetch('https://strangers-things.herokuapp.com/api/2207-FTB-ET-WEB-PT/users/login', {\r\n                method:\"POST\",\r\n                headers:{\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    user:{\r\n                        username:props.username,\r\n                        password: pwd\r\n                    }\r\n                })\r\n            }).then(response => response.json())\r\n            .then(result => {\r\n                if(result.success){\r\n\r\n                    props.setToken(result.data.token);\r\n                    setSuccess(true);\r\n\r\n                    window.localStorage.setItem('Token', result.data.token);\r\n                    window.localStorage.setItem('User', props.username);\r\n                    setMessage(\"Success~ Redirecting to your profile page now...\");\r\n                }\r\n                else{\r\n                    setError(true);\r\n                    setMessage(\"No User found.\");\r\n                    \r\n                }\r\n            })\r\n            .catch(console.error);\r\n        }\r\n    }\r\n\r\n    const handleEmail = (event) => {\r\n        props.setUsername(event.target.value);\r\n    }\r\n\r\n    const handlePassword = (event) => {\r\n        setPWD(event.target.value);\r\n    }\r\n\r\n    return (\r\n    <div className=\"loginPage\">\r\n        <Header token={props.token} setToken={props.setToken} setUsername={props.setUsername}/>\r\n        <div className=\"form text-center loginpage\">\r\n                <div>\r\n                    <h1 className=\"loginTitle\">Log in</h1>\r\n                </div>\r\n            \r\n                {/* Calling to the methods */}\r\n                <div className=\"messages\">\r\n                    {errorMessage()}\r\n                    {successMessage()}\r\n                </div>\r\n            \r\n                <form onSubmit={submitHandler}>\r\n                    {/* Labels and inputs for form data */}\r\n                    <div>\r\n                        <label className=\"label loginInput\">Email</label>\r\n                        <input onChange={handleEmail} className=\"input\"\r\n                        value={props.username === null ? \"\" : props.username} type=\"email\" />\r\n                    </div>\r\n                    \r\n                    <div>\r\n                        <label className=\"label loginInput\">Password</label>\r\n                        <input onChange={handlePassword} className=\"input\"\r\n                        value={pwd} type=\"password\" />\r\n                    </div>\r\n                    \r\n                    {/*onClick={handleSubmit}*/}\r\n                    <button className=\"loginSubBtn\" type=\"submit\">\r\n                        Submit\r\n                    </button>\r\n\r\n                </form>\r\n                <div className=\"text-center\">\r\n                    <p>Not a member? <a href=\"/account/register\">Register Here</a></p>\r\n                </div>\r\n            </div>\r\n        {/* \r\n        <MDBContainer className=\"p-3 my-5 d-flex flex-column w-50\">\r\n            <h1 style={{textAlign:'center'}}>Log in</h1>\r\n            <MDBInput wrapperClass='mb-4' label='Email address' id='form1' type='email'/>\r\n            <MDBInput wrapperClass='mb-4' label='Password' id='form2' type='password'/>\r\n\r\n            <div className=\"d-flex justify-content-between mx-3 mb-4\">\r\n                <MDBCheckbox name='flexCheck' value='' id='flexCheckDefault' label='Remember me' />\r\n                <a href=\"#\">Forgot password?</a>\r\n            </div>\r\n\r\n            <MDBBtn className=\"mb-4\">Sign in</MDBBtn>\r\n\r\n            <div className=\"text-center\">\r\n                <p>Not a member? <a href=\"/account/register\">Register</a></p>\r\n\r\n            </div>\r\n        </MDBContainer>\r\n        */}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}